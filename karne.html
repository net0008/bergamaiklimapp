<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eko-XP: 2050 BaÅŸarÄ±mlarÄ±</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        :root { 
            --mc-green: #55FF55; --mc-dark: #3F3F3F; --mc-border: #000; --btn-blue: #2980b9;
        }

        body { 
            font-family: 'Segoe UI', sans-serif;
            background: #1a1a1a url('imagery/bergama-bg.jpg') no-repeat center center fixed;
            background-size: cover; margin: 0; padding: 20px; color: white;
        }

        .main-container {
            max-width: 800px; margin: auto; background: rgba(0, 0, 0, 0.9);
            border: 4px solid var(--mc-border); border-radius: 10px; padding: 30px;
            box-shadow: 0 0 30px rgba(85, 255, 85, 0.3);
        }

        h1 { 
            font-family: 'Press Start 2P', cursive; font-size: 1.1em; text-align: center;
            color: var(--mc-green); text-shadow: 3px 3px #000; margin-bottom: 40px;
            line-height: 1.6;
        }

        /* Seviye ve XP Ã‡ubuÄŸu */
        .level-container { text-align: center; margin-bottom: 30px; }
        .level-number { font-family: 'Press Start 2P', cursive; font-size: 3.5em; color: var(--mc-green); text-shadow: 4px 4px #000; }
        
        .xp-bar-wrapper {
            width: 100%; height: 30px; background: #333; border: 3px solid #000;
            position: relative; margin-top: 15px; overflow: hidden;
        }
        .xp-bar-fill {
            height: 100%; background: var(--mc-green); width: 0%;
            transition: width 2s cubic-bezier(0.1, 0.5, 0.1, 1);
            box-shadow: inset 0 -6px rgba(0,0,0,0.4);
        }

        /* Vurucu Mesaj AlanÄ± */
        .summary-text { 
            background: rgba(255, 255, 255, 0.1); border-left: 5px solid var(--mc-green);
            padding: 20px; margin: 30px 0; font-size: 1.1em; line-height: 1.7; font-style: italic;
        }

        /* BaÅŸarÄ±mlar */
        .achievements-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .achievement-card {
            background: #2c2c2c; border: 3px solid #000; padding: 15px;
            display: flex; align-items: center; gap: 15px; opacity: 0.3; transition: 0.5s;
            filter: grayscale(1);
        }
        .achievement-card.unlocked { 
            opacity: 1; border-color: var(--mc-green); background: #1e3d1a; 
            filter: grayscale(0); transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.4);
        }
        .icon { font-size: 2.2em; }
        .info b { display: block; font-size: 0.95em; color: var(--mc-green); }
        .info span { font-size: 0.8em; color: #ccc; }

        .nav-bar { display: flex; justify-content: center; gap: 15px; margin-top: 40px; }
        .nav-btn {
            padding: 15px 30px; background: var(--mc-dark); color: white; border: 3px solid #000;
            text-decoration: none; font-weight: bold; cursor: pointer; transition: 0.2s;
            font-family: inherit;
        }
        .nav-btn:hover { background: var(--btn-blue); transform: translateY(-3px); }
        
        @media print { .nav-bar { display: none; } }
    </style>
</head>
<body>

<div class="main-container">
    <h1>ğŸ† 2050 Ä°KLÄ°M KAHRAMANI<br>BAÅARIMLAR VE EKO-XP</h1>

    <div class="level-container">
        <span style="font-size: 0.8em; letter-spacing: 2px;">DÃœNYA SEVÄ°YESÄ°</span>
        <div class="level-number" id="levelDisplay">0</div>
        <div class="xp-bar-wrapper">
            <div class="xp-bar-fill" id="xpBar"></div>
        </div>
        <p id="xpStatus" style="color:var(--mc-green); margin-top:10px; font-weight: bold;">0 / 1000 Eko-XP</p>
    </div>

    <div class="summary-text" id="summaryMsg">
        Analiz yapÄ±lÄ±yor, lÃ¼tfen bekle...
    </div>

    <div class="achievements-grid">
        <div class="achievement-card" id="ach1">
            <div class="icon">ğŸŒ³</div>
            <div class="info"><b>Orman MuhafÄ±zÄ±</b><span>500.000+ AÄŸaÃ§ MirasÄ±</span></div>
        </div>
        <div class="achievement-card" id="ach2">
            <div class="icon">âš¡</div>
            <div class="info"><b>Fosil AvcÄ±sÄ±</b><span>%70+ Temiz Enerji</span></div>
        </div>
        <div class="achievement-card" id="ach3">
            <div class="icon">â™»ï¸</div>
            <div class="info"><b>SÄ±fÄ±r AtÄ±kÃ§Ä±</b><span>Ayak Ä°zi Testi BaÅŸarÄ±sÄ±</span></div>
        </div>
        <div class="achievement-card" id="ach4">
            <div class="icon">ğŸ–ï¸</div>
            <div class="info"><b>Gelecek Kurucu</b><span>Bergama'yÄ± kurtardÄ±n!</span></div>
        </div>
    </div>

    <div class="nav-bar">
        <button onclick="window.print()" class="nav-btn" style="background: #27ae60;">ğŸ–¨ï¸ SertifikayÄ± YazdÄ±r</button>
        <a href="index.html" class="nav-btn">ğŸ  Ana Sayfaya DÃ¶n</a>
    </div>
</div>

<script>
window.onload = function() {
    // 1. Verileri GÃ¼venli Bir Åekilde Ã‡ek
    const energy = parseInt(localStorage.getItem('sim_energy')) || 0;
    const trees = parseInt(localStorage.getItem('sim_trees')) || 0;
    const water = parseInt(localStorage.getItem('sim_water')) || 0;
    const temp = parseFloat(localStorage.getItem('sim_temp')) || 23.1;
    const quizXP = parseInt(localStorage.getItem('quiz_xp')) || 0;

    // 2. XP Hesaplama (SimÃ¼latÃ¶r 600 + Test 400 = 1000)
    // SÃ¼rgÃ¼lerin pozisyonuna gÃ¶re aÄŸÄ±rlÄ±klÄ± puanlama
    let energyXP = energy * 2; // Max 200
    let treeXP = trees / 5000; // Max 200
    let waterXP = water * 2;   // Max 200
    
    let simXP = Math.round(energyXP + treeXP + waterXP);
    let totalEkoXP = simXP + quizXP;

    if(totalEkoXP > 1000) totalEkoXP = 1000;

    // 3. Seviye ve GÃ¶rsel GÃ¼ncelleme
    let level = Math.floor(totalEkoXP / 200);
    document.getElementById('levelDisplay').innerText = level;
    document.getElementById('xpStatus').innerText = totalEkoXP + " / 1000 Eko-XP";
    
    // XP BarÄ±nÄ± Doldur
    setTimeout(() => {
        document.getElementById('xpBar').style.width = (totalEkoXP / 10) + "%";
    }, 500);

    // 4. Vurucu ve Nesnel Mesaj Kurgusu (52 YaÅŸ Vizyonu)
    let impactMsg = "";
    if (totalEkoXP >= 800) {
        impactMsg = `Tebrikler Kahraman! AldÄ±ÄŸÄ±n cesur kararlar sayesinde 2050'de Bergama'da doÄŸacak Ã§ocuklar, senin sayende maskesiz nefes alacak ve serin gÃ¶lgelerde bÃ¼yÃ¼yecek. Sen sadece bir simÃ¼lasyonu deÄŸil, gerÃ§ek bir geleceÄŸi kurtardÄ±n.`;
    } else if (totalEkoXP >= 500) {
        impactMsg = `Ä°yi iÅŸ Ã§Ä±kardÄ±n. Bergama 2050'de hala zorluklar yaÅŸayacak olsa da, senin bugÃ¼n attÄ±ÄŸÄ±n adÄ±mlar sayesinde yeni nesil iÃ§in bir umut kapÄ±sÄ± aralandÄ±. Ama unutma; doÄŸa daha fazlasÄ±nÄ± bekliyor.`;
    } else {
        impactMsg = `Dikkat! KararlarÄ±n 2050'deki Ã§ocuklara Ã§ok aÄŸÄ±r bir miras bÄ±rakÄ±yor. Kavurucu sÄ±caklar ve su kÄ±tlÄ±ÄŸÄ±, senin bugÃ¼nkÃ¼ eylemsizliÄŸinin sonucu olabilir. GeleceÄŸi kurtarmak iÃ§in daha radikal kararlar almalÄ±sÄ±n.`;
    }
    document.getElementById('summaryMsg').innerText = impactMsg;

    // 5. BaÅŸarÄ±mlarÄ± (Achievements) AÃ§ 
    if(trees >= 500000) document.getElementById('ach1').classList.add('unlocked');
    if(energy >= 70) document.getElementById('ach2').classList.add('unlocked');
    if(quizXP >= 300) document.getElementById('ach3').classList.add('unlocked');
    if(temp <= 21.8) document.getElementById('ach4').classList.add('unlocked');
};
</script>

</body>
</html>