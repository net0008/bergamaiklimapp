<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nihai Sonu√ß</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Playfair+Display:wght@700&family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; background: #000; color: white; padding: 40px; text-align: center; margin: 0; }
        .mc-font { font-family: 'Press Start 2P', cursive; color: #55FF55; font-size: 1.2em; line-height: 1.5; }
        .adult-font { font-family: 'Playfair Display', serif; color: #f8f9fa; font-size: 2.2em; }
        
        .card { max-width: 700px; margin: auto; background: rgba(255,255,255,0.08); padding: 40px; border-radius: 20px; border: 4px solid #55FF55; box-shadow: 0 0 30px rgba(85,255,85,0.2); }
        .xp-bar { width: 100%; height: 30px; background: #333; border: 3px solid #000; margin: 20px 0; overflow: hidden; }
        .fill { height: 100%; background: #55FF55; width: 0%; transition: width 2s cubic-bezier(0.1, 0.5, 0.1, 1); }
        
        .btn { padding: 15px 30px; background: #55FF55; color: black; border: none; font-weight: bold; cursor: pointer; border-radius: 10px; font-size: 1.1em; transition: 0.3s; font-family: inherit; }
        .btn:hover { transform: scale(1.05); }
        
        .achievements { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 30px 0; }
        .ach { background: rgba(0,0,0,0.5); padding: 15px; border-radius: 10px; border: 2px solid #333; opacity: 0.4; filter: grayscale(1); }
        .ach.unlocked { opacity: 1; border-color: #55FF55; filter: grayscale(0); }
        
        @media print { .btn, .achievements { display: none; } .card { border-color: #000; color: #000; } }
    </style>
</head>
<body>
    <div class="card" id="finalCard">
        <h1 id="title">SONU√á BELGESƒ∞</h1>
        <div id="level" style="font-size: 4em; font-weight: bold; color: #55FF55;">0</div>
        <p style="letter-spacing: 2px; margin-top: -10px;">SEVƒ∞YE / UYUM</p>
        
        <div class="xp-bar"><div id="bar" class="fill"></div></div>
        <p id="xpText" style="font-weight: bold;">0 / 1000 Puan</p>
        
        <div id="msg" style="font-style: italic; margin: 30px 0; line-height: 1.8; font-size: 1.1em; background: rgba(255,255,255,0.1); padding: 20px; border-left: 5px solid #55FF55;"></div>
        
        <div class="achievements">
            <div class="ach" id="a1">üå≥ Orman Mirasƒ±</div>
            <div class="ach" id="a2">‚ö° Temiz Enerji</div>
            <div class="ach" id="a3">‚ôªÔ∏è Bilin√ßli T√ºketici</div>
            <div class="ach" id="a4">üèÜ 2050 Kahramanƒ±</div>
        </div>

        <button class="btn" onclick="window.print()">üñ®Ô∏è BELGEYƒ∞ YAZDIR</button>
        <br><br>
        <a href="index.html" style="color: #ccc; text-decoration: none;">üè† Ana Veri Paneline D√∂n</a>
    </div>

    <script>
        window.onload = function() {
            const mode = localStorage.getItem('user_mode') || 'child';
            const energy = parseInt(localStorage.getItem('sim_energy')) || 0;
            const trees = parseInt(localStorage.getItem('sim_trees')) || 0;
            const quiz = parseInt(localStorage.getItem('quiz_xp')) || 0;
            
            // Sim√ºlasyon (600) + Quiz (400) = 1000 Puan
            let total = Math.round((energy * 3) + (trees / 3333) + quiz);
            if(total > 1000) total = 1000;

            const title = document.getElementById('title');
            const msg = document.getElementById('msg');
            const card = document.getElementById('finalCard');

            if(mode === 'child') {
                title.className = "mc-font";
                title.innerHTML = "KAHRAMANLIK<br>KARNESƒ∞";
                msg.innerText = total >= 700 ? "Sen bir Kahramansƒ±n! Bergama'nƒ±n 2050 geleceƒüini gaz maskelerinden kurtardƒ±n." : "Daha iyisini yapabilirsin. Unutma, gelecek senin ellerinde!";
            } else {
                title.className = "adult-font";
                title.innerText = "STRATEJƒ∞K GELECEK RAPORU";
                card.style.borderColor = "#2c3e50";
                document.getElementById('bar').style.background = "#2c3e50";
                document.getElementById('level').style.color = "#2c3e50";
                msg.innerText = total >= 700 ? "Onlara en saƒülam evleri bƒ±raktƒ±nƒ±z. Bu belge, o evlerin i√ßinde nefes alacaklarƒ± bir g√∂ky√ºz√ºn√º de miras bƒ±raktƒ±ƒüƒ±nƒ±zƒ±n kanƒ±tƒ±dƒ±r." : "Bu tablo, √ßocuklarƒ±nƒ±zƒ±n 2050'de √ßok zor bir iklim ve ekonomi ile sava≈üacaƒüƒ±nƒ± g√∂steriyor. Deƒüi≈üim i√ßin hala vakit var.";
            }

            document.getElementById('level').innerText = Math.floor(total / 200);
            document.getElementById('xpText').innerText = total + " PUAN";
            setTimeout(() => document.getElementById('bar').style.width = (total / 10) + "%", 500);

            // Ba≈üarƒ±mlar
            if(trees >= 500000) document.getElementById('a1').classList.add('unlocked');
            if(energy >= 70) document.getElementById('a2').classList.add('unlocked');
            if(quiz >= 300) document.getElementById('a3').classList.add('unlocked');
            if(total >= 800) document.getElementById('a4').classList.add('unlocked');
        };
    </script>
</body>
</html>