<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eko-XP BaÅŸarÄ±mlarÄ±</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        :root { 
            --mc-green: #55FF55; --mc-dark: #3F3F3F; --mc-gray: #BDC3C7;
            --mc-border: #000; --btn-blue: #2980b9;
        }

        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #1a1a1a url('imagery/bergama-bg.jpg') no-repeat center center fixed;
            background-size: cover; margin: 0; padding: 20px; color: white;
        }

        .main-container {
            max-width: 800px; margin: auto; background: rgba(0, 0, 0, 0.85);
            border: 4px solid var(--mc-border); border-radius: 10px; padding: 30px;
            box-shadow: 0 0 20px rgba(0,255,0,0.2); position: relative;
        }

        h1 { 
            font-family: 'Press Start 2P', cursive; font-size: 1.2em; text-align: center;
            color: var(--mc-green); text-shadow: 3px 3px #000; margin-bottom: 40px;
        }

        /* Minecraft Seviye ve XP BarÄ± */
        .level-container { text-align: center; margin-bottom: 30px; }
        .level-number { font-family: 'Press Start 2P', cursive; font-size: 3em; color: var(--mc-green); text-shadow: 4px 4px #000; }
        
        .xp-bar-wrapper {
            width: 100%; height: 25px; background: #333; border: 3px solid #000;
            position: relative; margin-top: 10px;
        }
        .xp-bar-fill {
            height: 100%; background: var(--mc-green); width: 0%;
            transition: width 1.5s ease-out; box-shadow: inset 0 -4px rgba(0,0,0,0.3);
        }

        /* BaÅŸarÄ±mlar KartlarÄ± */
        .achievements-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 30px; }
        .achievement-card {
            background: #4d4d4d; border: 3px solid #000; padding: 15px;
            display: flex; align-items: center; gap: 15px; opacity: 0.4; transition: 0.3s;
        }
        .achievement-card.unlocked { opacity: 1; border-color: var(--mc-green); background: #2d5a27; }
        .icon { font-size: 2em; }
        .info b { display: block; font-size: 1em; }
        .info span { font-size: 0.8em; }

        .nav-bar { display: flex; justify-content: center; gap: 15px; margin-top: 40px; }
        .nav-btn {
            padding: 12px 25px; background: var(--mc-dark); color: white; border: 3px solid #000;
            text-decoration: none; font-weight: bold; cursor: pointer; transition: 0.2s;
        }
        .nav-btn:hover { background: var(--btn-blue); transform: scale(1.05); }

        .summary-text { text-align: center; font-size: 1.1em; margin: 20px 0; line-height: 1.6; }
    </style>
</head>
<body>

<div class="main-container">
    <h1>ğŸ® BAÅARIMLAR VE EKO-XP</h1>

    <div class="level-container">
        <span>GÃœNCEL SEVÄ°YE</span>
        <div class="level-number" id="levelDisplay">0</div>
        <div class="xp-bar-wrapper">
            <div class="xp-bar-fill" id="xpBar"></div>
        </div>
        <p id="xpStatus" style="color:var(--mc-green); margin-top:10px;">0 / 1000 Eko-XP</p>
    </div>

    <div class="summary-text" id="summaryMsg">
        Bergama'yÄ± kurtarmak iÃ§in simÃ¼latÃ¶rde kararlar almalÄ±sÄ±n!
    </div>

    <div class="achievements-grid">
        <div class="achievement-card" id="ach1">
            <div class="icon">ğŸŒ³</div>
            <div class="info"><b>AÄŸaÃ§ Dostu</b><span>100.000+ AÄŸaÃ§ dikildi</span></div>
        </div>
        <div class="achievement-card" id="ach2">
            <div class="icon">â˜€ï¸</div>
            <div class="info"><b>GÃ¼neÅŸ KralÄ±</b><span>%50+ Temiz Enerji</span></div>
        </div>
        <div class="achievement-card" id="ach3">
            <div class="icon">ğŸ’§</div>
            <div class="info"><b>Su Koruyucusu</b><span>%70+ AkÄ±llÄ± Sulama</span></div>
        </div>
        <div class="achievement-card" id="ach4">
            <div class="icon">ğŸ†</div>
            <div class="info"><b>Ä°klim KahramanÄ±</b><span>Bergama'yÄ± soÄŸuttun!</span></div>
        </div>
    </div>

    <div class="nav-bar">
        <a href="simulator.html" class="nav-btn">ğŸ•¹ï¸ SimÃ¼latÃ¶re DÃ¶n</a>
        <a href="index.html" class="nav-btn">ğŸ  Anasayfa</a>
    </div>
</div>

<script>
    // karne.html iÃ§indeki window.onload kÄ±smÄ±nÄ± ÅŸununla deÄŸiÅŸtir:
window.onload = function() {
    const energy = parseInt(localStorage.getItem('sim_energy')) || 0;
    const trees = parseInt(localStorage.getItem('sim_trees')) || 0;
    const water = parseInt(localStorage.getItem('sim_water')) || 0;
    const temp = parseFloat(localStorage.getItem('sim_temp')) || 23.1;
    const quizXP = parseInt(localStorage.getItem('quiz_xp')) || 0; // Testten gelen puan

    // Yeni Hesaplama: SimÃ¼latÃ¶r (Max 600) + Ayak Ä°zi Testi (Max 400) = 1000 Eko-XP
    let simXP = Math.round((energy * 2) + (trees / 5000) + (water * 1.5));
    let totalEkoXP = simXP + quizXP;

    if(totalEkoXP > 1000) totalEkoXP = 1000;

    let level = Math.floor(totalEkoXP / 200);

    document.getElementById('levelDisplay').innerText = level;
    document.getElementById('xpStatus').innerText = totalEkoXP + " / 1000 Eko-XP";
    document.getElementById('xpBar').style.width = (totalEkoXP / 10) + "%";
    
    // ... geri kalan baÅŸarÄ± kontrol kodlarÄ± aynÄ± kalabilir ...
};
{
        if(totalEkoXP > 0) {
            document.getElementById('summaryMsg').innerHTML = `Tebrikler Kahraman! Bergama iÃ§in <b>${totalEkoXP} Eko-XP</b> topladÄ±n. KararlarÄ±n sayesinde gelecek daha yeÅŸil!`;
        }

        // BaÅŸarÄ±mlarÄ± Kontrol Et
        if(trees >= 100000) document.getElementById('ach1').classList.add('unlocked');
        if(energy >= 50) document.getElementById('ach2').classList.add('unlocked');
        if(water >= 70) document.getElementById('ach3').classList.add('unlocked');
        if(temp <= 21.5) document.getElementById('ach4').classList.add('unlocked');
    };
</script>

</body>
</html>