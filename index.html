<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>"Pergamon"â€™un Ä°zinde, Yapay ZekÃ¢ ile Bergama 2050: Ä°klim Zaman TÃ¼neli</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
    <style>
        :root { 
            --temp: #FF0000; --rain: #3498db; --btn: #2980b9; --dark: #2c3e50; 
            --past-b: #3498db; --past-tr: #e74c3c; --fut-b: #8e44ad; --fut-tr: #f39c12;
        }

        /* ARKA PLAN RESMÄ° EKLENDÄ° */
        body { 
            font-family: 'Segoe UI', sans-serif; 
            margin: 0; 
            padding: 20px; 
            color: var(--dark); 
            background-image: url('imagery/bergama-bg.jpg'); /* Bergama ManzarasÄ± */
            background-size: cover; 
            background-attachment: fixed; 
            background-position: center;
        }

        /* BUZLU CAM EFEKTÄ° (Glassmorphism) */
        .container { 
            max-width: 1000px; 
            margin: auto; 
            background: rgba(255, 255, 255, 0.92); /* YarÄ± Åeffaf Beyaz */
            backdrop-filter: blur(10px); /* Arka planÄ± bulanÄ±klaÅŸtÄ±rÄ±r */
            -webkit-backdrop-filter: blur(10px);
            padding: 40px; 
            border-radius: 25px; 
            box-shadow: 0 15px 40px rgba(0,0,0,0.2); 
            border: 1px solid rgba(255,255,255,0.5);
        }
        
        h1 { text-align: center; margin-top: 0; margin-bottom: 10px; line-height: 1.4; color: var(--dark); text-shadow: 1px 1px 2px rgba(255,255,255,0.8); }

        .nav-bar { display: flex; justify-content: center; gap: 15px; margin-bottom: 30px; border-bottom: 2px solid rgba(0,0,0,0.1); padding-bottom: 25px; flex-wrap: wrap; }
        .nav-btn { padding: 12px 25px; border-radius: 50px; background: var(--btn); color: white; text-decoration: none; font-weight: bold; transition: 0.3s; border: none; box-shadow: 0 4px 10px rgba(0,0,0,0.15);}
        .nav-btn:hover { transform: translateY(-3px); filter: brightness(1.1); box-shadow: 0 6px 15px rgba(0,0,0,0.2);}

        .accordion { margin-bottom: 15px; border: 1px solid rgba(0,0,0,0.1); border-radius: 15px; overflow: hidden; transition: all 0.3s ease; background: rgba(255,255,255,0.9); }
        .accordion:hover { box-shadow: 0 8px 20px rgba(0,0,0,0.08); transform: translateY(-2px); }
        .accordion-header { padding: 20px; cursor: pointer; font-weight: bold; background: transparent; display: flex; justify-content: space-between; align-items: center; font-size: 1.1em; user-select: none; }
        .accordion-header::after { content: 'â–¼'; font-size: 0.8em; color: #cbd5e1; transition: transform 0.4s ease; }
        .accordion.active { border-width: 2px; }
        .accordion.active .accordion-header { background: rgba(0,0,0,0.03); color: var(--btn); }
        .accordion.active .accordion-header::after { content: 'â–²'; transform: rotate(180deg); color: var(--btn); }

        .accordion:nth-child(3) { border-left: 8px solid var(--past-b); }
        .accordion:nth-child(4) { border-left: 8px solid var(--past-tr); }
        .accordion:nth-child(5) { border-left: 8px solid var(--fut-b); }
        .accordion:nth-child(6) { border-left: 8px solid var(--fut-tr); }

        .accordion-content { display: none; padding: 20px; border-top: 1px solid rgba(0,0,0,0.05); background: rgba(250,250,250,0.5); }
        .accordion.active .accordion-content { display: block; }
        .chart-box { height: 350px; margin-bottom: 30px; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); border: 1px solid #eee; }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ›ï¸ Pergamonâ€™un Ä°zinde, Yapay ZekÃ¢ ile Bergama 2050:<br>Ä°klim Zaman TÃ¼neli</h1>
    
    <div class="nav-bar">
        <a href="index.html" class="nav-btn">ğŸ  Anasayfa</a>
        <a href="secim.html" class="nav-btn">ğŸ® SimÃ¼lasyon</a>
        <a href="hakkinda.html" class="nav-btn" style="background: #16a085;">â„¹ï¸ HakkÄ±nda</a>
        <a href="nasil-yaptik.html" class="nav-btn" style="background: #8e44ad;">ğŸ› ï¸ NasÄ±l YaptÄ±k?</a>
    </div>

    <div class="accordion active">
        <div class="accordion-header" onclick="toggleAccordion(this)">ğŸ“Š 1. BÃ¶lÃ¼m: Bergama GeÃ§miÅŸ Verileri (1980-2025)</div>
        <div class="accordion-content">
            <div class="chart-box"><canvas id="bTempHist"></canvas></div>
            <div class="chart-box"><canvas id="bRainHist"></canvas></div>
        </div>
    </div>

    <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(this)">ğŸ‡¹ğŸ‡· 2. BÃ¶lÃ¼m: TÃ¼rkiye Geneli Analiz (1980-2025)</div>
        <div class="accordion-content">
            <div class="chart-box"><canvas id="trTempHist"></canvas></div>
            <div class="chart-box"><canvas id="trRainHist"></canvas></div>
        </div>
    </div>

    <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(this)">ğŸ”® 3. BÃ¶lÃ¼m: Bergama Gelecek Projeksiyonu (2025-2050)</div>
        <div class="accordion-content">
            <div class="chart-box"><canvas id="bTempProj"></canvas></div>
            <div class="chart-box"><canvas id="bRainProj"></canvas></div>
        </div>
    </div>

    <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(this)">ğŸ“ˆ 4. BÃ¶lÃ¼m: TÃ¼rkiye Gelecek Vizyonu (2025-2050)</div>
        <div class="accordion-content">
            <div class="chart-box"><canvas id="trTempProj"></canvas></div>
            <div class="chart-box"><canvas id="trRainProj"></canvas></div>
        </div>
    </div>
</div>

<script>
    // DataLabels Eklentisini Kaydet
    Chart.register(ChartDataLabels);

    function toggleAccordion(element) {
        element.parentElement.classList.toggle('active');
    }

    async function init() {
        const res = await fetch('data/bergama_iklim.json');
        const d = await res.json();

        const make = (id, label, x, y, type, color) => {
            new Chart(document.getElementById(id), {
                type: type,
                data: { 
                    labels: x, 
                    datasets: [{ 
                        label: label, 
                        data: y, 
                        borderColor: color, 
                        backgroundColor: color + '33', 
                        fill: type === 'line', 
                        borderWidth: 4,
                        tension: 0.3,
                        borderRadius: type === 'bar' ? 6 : 0 // SÃ¼tun grafikleri iÃ§in yumuÅŸak kÃ¶ÅŸeler
                    }] 
                },
                options: { 
                    responsive: true, 
                    maintainAspectRatio: false,
                    layout: {
                        padding: { top: 30 }
                    },
                    plugins: { 
                        legend: { position: 'top' },
                        datalabels: {
                            // Ã‡izgi grafikte kendi rengi, SÃ¼tun grafikte siyah yazÄ± (#000000)
                            color: type === 'line' ? color : '#000000',
                            anchor: type === 'line' ? 'end' : 'center',
                            align: type === 'line' ? 'top' : 'center',
                            font: { weight: 'bold', size: 11 },
                            formatter: function(value) { return value; }
                        }
                    },
                    scales: {
                        x: { grid: { display: false } },
                        y: { grid: { color: 'rgba(0,0,0,0.05)' } }
                    }
                }
            });
        };

        make('bTempHist', 'Bergama SÄ±caklÄ±k (Â°C)', d.bergama_gecmis.map(v=>v.Yil), d.bergama_gecmis.map(v=>v.Sicaklik), 'line', '#FF0000');
        make('bRainHist', 'Bergama YaÄŸÄ±ÅŸ (mm)', d.bergama_gecmis.map(v=>v.Yil), d.bergama_gecmis.map(v=>v.Yagis), 'bar', '#3498db');
        make('trTempHist', 'TÃ¼rkiye SÄ±caklÄ±k (Â°C)', d.turkiye_gecmis.map(v=>v.Yil), d.turkiye_gecmis.map(v=>v.Sicaklik), 'line', '#FF0000');
        make('trRainHist', 'TÃ¼rkiye YaÄŸÄ±ÅŸ (mm)', d.turkiye_gecmis.map(v=>v.Yil), d.turkiye_gecmis.map(v=>v.Yagis), 'bar', '#3498db');
        make('bTempProj', '2050 Bergama Tahmini (Â°C)', d.projeksiyonlar.bergama.map(v=>v.Yil), d.projeksiyonlar.bergama.map(v=>v.Sicaklik), 'line', '#8e44ad');
        make('bRainProj', '2050 Bergama YaÄŸÄ±ÅŸ (mm)', d.projeksiyonlar.bergama.map(v=>v.Yil), d.projeksiyonlar.bergama.map(v=>v.Yagis), 'bar', '#27ae60');
        make('trTempProj', '2050 TÃ¼rkiye Tahmini (Â°C)', d.projeksiyonlar.turkiye.map(v=>v.Yil), d.projeksiyonlar.turkiye.map(v=>v.Sicaklik), 'line', '#f39c12');
        make('trRainProj', '2050 TÃ¼rkiye YaÄŸÄ±ÅŸ (mm)', d.projeksiyonlar.turkiye.map(v=>v.Yil), d.projeksiyonlar.turkiye.map(v=>v.Yagis), 'bar', '#2c3e50');
    }
    init();
</script>
</body>
</html>